execute pathogen#infect()

if has('gui_running')
    colorscheme slate

    set guioptions-=m " remove menu bar
    set guioptions-=T " remove toolbar
    set guioptions-=r " remove right-hand scroll bar
    set guioptions-=L " remove left-hand scroll bar
    set guioptions-=e " use text-based tabs instead of GUI tabs

    " toggle menu bar with <c-f1>
    nnoremap <C-F1> :if &go=~#'m'<Bar>set go-=m<Bar>else<Bar>set go+=m<Bar>endif<CR>
else
    colorscheme desert
endif

if has('win32')
    set guifont=Consolas:h10:cANSI
endif

set tabstop=4
set shiftwidth=4

" allow edited files to be put in the background
set hidden

" make tab characters visible
set list

" turn on number and relativenumber
set number
set relativenumber

" search settings
set incsearch
set hlsearch
set ignorecase
set smartcase

" turn on folding using syntax
set foldmethod=syntax

" turn off intro screen
set shortmess+=I

" configure taglist
if has('win32')
    " let taglist find the ctags executable
    let Tlist_Ctags_Cmd = 'C:\Users\soconnel\Applications\ctags58\ctags.exe'
    let g:ctrlp_buftag_ctags_bin = 'C:\Users\soconnel\Applications\ctags58\ctags.exe'
else
    let Tlist_Ctags_Cmd = '/home/soconnel/bin/ctags/bin/ctags'
    let g:ctrlp_buftag_ctags_bin = '/home/soconnel/bin/ctags/bin/ctags'
endif
" let Tlist_Use_Right_Window = 1

" look for tags files in current directory and two levels up as well
set tags=./tags,./../tags,./../../tags

" configure ctrlp
let g:ctrlp_extensions = ['undo', 'line', 'mixed', 'buffertag']
let g:ctrlp_cmd = 'CtrlPMRU'

set visualbell
set wildignore+=tags,*.gch

let mapleader = "\<space>"
let maplocalleader = "\\"
nnoremap <leader>el :execute getline('.')<cr>
nnoremap <leader>cl :let @l="- [" . expand('%:t') . ":" . line('.') . "]\n- " . getline('.') . "\n"<cr>
nnoremap <leader>ev :e $MYVIMRC<cr>
nnoremap <leader>sv :so $MYVIMRC<cr>
nnoremap <leader>w- O<esc>80i-<esc>j^
nnoremap <leader>tl :TlistToggle<cr>
nnoremap <leader>hl :nohlsearch<cr>
nnoremap <leader>msg O::msg_vdebug("shane: 
nnoremap <c-l> 6zl
nnoremap <c-h> 6zh
nnoremap <c-j> 4<c-e>
nnoremap <c-k> 4<c-y>
nnoremap <a-j> 10j
nnoremap <a-k> 10k
" Use <c-w>c instead
" nnoremap <leader>c :close<cr>

" set up quickfix/location list window mappings
let g:toggle_list_no_mappings = 1
nnoremap <silent> <leader>ll :call ToggleLocationList()<CR>
nnoremap <silent> <leader>qq :call ToggleQuickfixList()<CR>
nnoremap <leader>ln :lnewer<cr>
nnoremap <leader>lo :lolder<cr>
nnoremap <leader>qn :cnewer<cr>
nnoremap <leader>qo :colder<cr>

" set up gtags.vim
let g:Gtags_OpenQuickfixWindow = 0
nnoremap <leader>] :GtagsCursor<cr>

" map <leader>f <Plug>(easymotion-f)
map <leader>f <Plug>(easymotion-bd-f)
map <leader>F <Plug>(easymotion-F)
map <leader>t <Plug>(easymotion-t)
map <leader>T <Plug>(easymotion-T)
" map <leader>w <Plug>(easymotion-bd-w)
map <leader>w <Plug>(easymotion-w)
map <leader>W <Plug>(easymotion-W)
map <leader>b <Plug>(easymotion-b)
map <leader>B <Plug>(easymotion-B)
map <leader>j <Plug>(easymotion-j)
map <leader>k <Plug>(easymotion-k)
map <leader>ma <Plug>(easymotion-jumptoanywhere)

if has('win32')
	nnoremap <leader>cdw :cd D:\work<cr>
	nnoremap <leader>qcd :cd $ACDS_SRC_ROOT\quartus<cr>
	nnoremap <leader>nt :NERDTree D:\work<cr>
	nnoremap <leader>ct :ConqueTerm C:\Windows\System32\cmd.exe /k S:\tools\acds_bri\arc_shortcut.bat<cr>
else
	nnoremap <leader>cdw :cd /data/soconnel/work<cr>
	nnoremap <leader>qcd :cd $ACDS_SRC_ROOT/quartus<cr>
	nnoremap <leader>nt :NERDTree /data/soconnel/work<cr>
	nnoremap <leader>ct :ConqueTerm bash<cr>
endif

" use `w to control window stuff instead of <c-w>
" nnoremap `w <c-w>
" nnoremap <c-w> <nop>

" use jk to exit insert/visual mode
inoremap jk <esc>
vnoremap jk <esc>

" always show a list of tags if more than one is found
nnoremap <c-]> g<c-]>

set colorcolumn=81
if has('gui_running')
    highlight ColorColumn ctermbg=black guibg=black
endif

" fix tab completion to make sense
set wildmode=longest,list,full

" handle quartus.ini files
augroup quartusini
    au!
    au BufNewFile,BufRead quartus.ini setlocal filetype=quartusini
    au FileType quartusini setlocal commentstring="# %s"
augroup END

augroup sdc_files
    autocmd!
    autocmd FileType sdc setlocal commentstring=#\ %s
augroup END

